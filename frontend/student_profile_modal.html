<!-- Student Profile Modal (Multi-Step Form) -->
<div id="studentProfileModal" class="create-modal-overlay" style="display:none;" onclick="closeStudentModal()">
    <div class="create-modal student-profile-modal" onclick="event.stopPropagation()" style="max-width:700px;">
        <div class="modal-header"
            style="justify-content: space-between; display: flex; align-items: center; border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 20px;">
            <h2 id="studentModalTitle" style="margin:0; font-size: 20px; color: #333;">Add Student Profile</h2>
            <button class="btn-close" onclick="closeStudentModal()"
                style="background:none; border:none; font-size:28px; color:#999; cursor:pointer;">×</button>
        </div>

        <!-- Step Indicator -->
        <div class="step-indicator">
            <div class="step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-label">Basic</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-label">Attendance</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-label">Academic</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-label">Family</div>
            </div>
            <div class="step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-label">Health & Safety</div>
            </div>
        </div>

        <form id="studentProfileForm">
            <input type="hidden" id="student_id_hidden" value="">
            <input type="hidden" id="classroom_id_hidden" value="">

            <!-- Step 1: Basic Information -->
            <div class="form-step active" data-step="1">
                <h3>Basic Information</h3>
                <div class="form-group">
                    <label>Student Name *</label>
                    <input type="text" id="student_name" required>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Age *</label>
                        <input type="number" id="student_age" min="5" max="20" required>
                    </div>
                    <div class="form-group">
                        <label>Grade/Class *</label>
                        <input type="text" id="student_grade" required>
                    </div>
                </div>
                <div class="form-group">
                    <label>School Location</label>
                    <select id="school_location">
                        <option value="Urban">Urban</option>
                        <option value="Rural">Rural</option>
                    </select>
                </div>
            </div>

            <!-- Step 2: Attendance Data -->
            <div class="form-step" data-step="2">
                <h3>Attendance Information</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Total School Days</label>
                        <input type="number" id="total_days" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label>Days Present</label>
                        <input type="number" id="days_present" min="0" value="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Days Absent</label>
                        <input type="number" id="days_absent" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label>Longest Continuous Absence (days)</label>
                        <input type="number" id="longest_absence" min="0" value="0">
                    </div>
                </div>
            </div>

            <!-- Step 3: Academic Performance -->
            <div class="form-step" data-step="3">
                <h3>Academic Performance</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Current Term Marks (%)</label>
                        <input type="number" id="current_marks" min="0" max="100" value="0">
                    </div>
                    <div class="form-group">
                        <label>Previous Term Marks (%)</label>
                        <input type="number" id="previous_marks" min="0" max="100" value="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Failed Subjects (Current)</label>
                        <input type="number" id="failed_subjects" min="0" value="0">
                    </div>
                    <div class="form-group">
                        <label>Failed Subjects (Previous)</label>
                        <input type="number" id="failed_subjects_previous" min="0" value="0">
                    </div>
                </div>
            </div>

            <!-- Step 4: Family & Economic -->
            <div class="form-step" data-step="4">
                <h3>Family & Economic Background</h3>
                <div class="form-group">
                    <label>Annual Family Income (₹)</label>
                    <input type="number" id="family_income" min="0" value="0">
                </div>
                <div class="form-group">
                    <label>Parent Education Level</label>
                    <select id="parent_education">
                        <option value="None">None</option>
                        <option value="Primary">Primary</option>
                        <option value="Secondary">Secondary</option>
                        <option value="Higher Secondary">Higher Secondary</option>
                        <option value="Graduate">Graduate</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Parent Attitude Towards Education</label>
                    <select id="parent_attitude">
                        <option value="Supportive">Supportive</option>
                        <option value="Neutral">Neutral</option>
                        <option value="Unsupportive">Unsupportive</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label><input type="checkbox" id="has_study_device"> Has Study Device</label>
                    </div>
                    <div class="form-group">
                        <label><input type="checkbox" id="student_works"> Student Works (affects schooling)</label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Daily Household Work (hours)</label>
                        <input type="number" id="household_work_hours" min="0" max="24" step="0.5" value="0">
                    </div>
                    <div class="form-group">
                        <label><input type="checkbox" id="family_migrates"> Family Migrates Seasonally</label>
                    </div>
                </div>
                <div class="form-group">
                    <label><input type="checkbox" id="early_marriage_risk"> Early Marriage Risk</label>
                </div>
            </div>

            <!-- Step 5: Health & Safety -->
            <div class="form-step" data-step="5">
                <h3>Health & Safety</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label>Nutrition Status</label>
                        <select id="nutrition_status">
                            <option value="Normal">Normal</option>
                            <option value="Undernourished">Undernourished</option>
                            <option value="Severely Undernourished">Severely Undernourished</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Health-Related Absences</label>
                        <input type="number" id="health_absences" min="0" value="0">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Menstrual Hygiene Access</label>
                        <select id="menstrual_hygiene">
                            <option value="Adequate">Adequate</option>
                            <option value="Limited">Limited</option>
                            <option value="None">None</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label><input type="checkbox" id="long_term_illness"> Long-term Illness</label>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Distance to School (km)</label>
                        <input type="number" id="distance_to_school" min="0" step="0.1" value="0">
                    </div>
                    <div class="form-group">
                        <label>Travel Mode</label>
                        <select id="travel_mode">
                            <option value="Walk">Walk</option>
                            <option value="Bicycle">Bicycle</option>
                            <option value="Bus">Bus</option>
                            <option value="Auto">Auto</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label><input type="checkbox" id="route_safety_concerns"> Route Safety Concerns</label>
                    </div>
                    <div class="form-group">
                        <label><input type="checkbox" id="girls_toilets_available" checked> Girls' Toilets
                            Available</label>
                    </div>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="form-navigation">
                <button type="button" class="btn-prev" onclick="prevStep()" style="display:none;">← Previous</button>
                <button type="button" class="btn-next" onclick="nextStep()">Next →</button>
                <button type="submit" class="btn-save-student" style="display:none;">Save Student</button>
            </div>
        </form>
    </div>
</div>